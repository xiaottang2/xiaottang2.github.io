<!DOCTYPE html><html lang="default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Wonder Woman Theme -- Music Engraving With Lilypond · Xiaoting Tang's Site</title><meta name="description" content="Wonder Woman Theme -- Music Engraving With Lilypond - Tang Xiaoting"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://xiaottang2.github.io/atom.xml" title="Xiaoting Tang's Site"></head><body><div class="wrap"><header><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/xiaottang2" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Wonder Woman Theme -- Music Engraving With Lilypond</h1><div class="post-info">Jul 19, 2017</div><div class="post-content"><p>So recently I was learning how to write MIDI music with a normal keyboard, instead of a professional MIDI keyboard, which often cost you 200-400 dollars. The music that I had in mind is the bad ass theme in the recent “Wonder Woman” movie.</p>
<a id="more"></a>
<p>It turns out that there are several matured tool for writing music with “code-like” command, such as <a href="https://www.ctan.org/pkg/musixtex?lang=en" target="_blank" rel="external">MusiXTex</a> and <a href="http://lilypond.org" target="_blank" rel="external">Lilypond</a>. (For WYSIWYG folks, check out <a href="https://musescore.org/" target="_blank" rel="external">MuseScore</a>)</p>
<p>However, MusiXTex, as reflected by postfix, is a music typesetting tool based on  \(\TeX\). It supports almost any kind of music engraving, but it does not support MIDI output. This means that although it outputs beautifully engraved music sheets as PDF files, it cannot output MIDI files that can later be played through your MIDI software.</p>
<p>On the contrary, Lilypond is capable of both music engraving and MIDI creation. In fact, it is the team who created MusiXTex that created Lilypond (Years )later, after they abandoned the work of pre-processing package for MusiXTex.</p>
<p>Let walk through a basic Lilypond program and see how it works.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">\version &quot;2.18.2&quot;</div><div class="line">\relative c&apos; &#123;</div><div class="line">c d e f g a b</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This is a HelloWorld program in Lilypond. As you might guess, the output of this program is just a sequence of notes from c(do) to b(ti):<br><img src="helloworld_notes.png" alt=""></p>
<p>Let’s pause it here for a moment and try to understand the difference between this and <a href="https://en.wikipedia.org/wiki/WYSIWYM" target="_blank" rel="external">WYSIWYM</a></p>
<p>Imagine that we are not composing this simple HelloWorld music, but a much larger one. Let say the total number of notes in this piece is 1000. Now, the amount of work that you must do in a WYSIWYG application, is 1000 times of the time it takes to</p>
<ol>
<li>Move cursor from the last note to the current one</li>
<li>Select the duration of the note (1, 1/2, 1/4 etc.)</li>
<li>Confirm adding the note</li>
</ol>
<p>I wouldn’t say that it is tremendously time-consuming, but I do get tired easily using this approach.</p>
<p>On the contrary, when composing in a WYSIWYM fashion, all you ever need to do is <em>typing</em>. The amount of work that you must do in a WYSIWYM is therefore only 1000 times of the time it takes to <em>type a note</em>, which (IMHO) is much quicker.</p>
<p>Let’s walk through the HelloWorld program we just wrote, line by line.</p>
<p>The first line <code>\version &quot;2.18.2&quot;</code> tells the Lilypond program what version of the compiler should this file be compiled by. However, it is fine to skip it, and Lilypond will automatically use the correct version (and warn you). I recommend always puttting that in the first line.</p>
<p>The second line starts with <code>\relative c&#39;</code>, which tells the program that <strong>whatever notes follows, intepret them using ‘relative’ mode and start with the C one octave above the middle C</strong>. The <code>&#39;</code> indicates <strong>one</strong> octave above the middle C. Analogously, <code>&#39;&#39;</code> indicates <strong>two</strong> octaves and so on. If you want to denote a C below the middle C, you may use <code>,</code>. Similarly, <code>,</code> indicates one octave below, <code>,,</code> indicates two octaves below and so on. Additionally, every note must be written in between the curly braces <code>{</code> and <code>}</code>.</p>
<p>The last part of the jargons is the <strong>relative mode</strong>, which means that <strong>the absolute pitch of every note should be chosen as the nearest one to the last note</strong>. For example, when we type <code>\relative c&#39; { e }</code>, we unambiguously mean the E two pitches higher than C’ ( the C one octave higher than the middle C), because compared with other Es, this E is the closest one. If you need higher E(s), you can type <code>\relative c&#39; { e e&#39; e&#39;&#39; e&#39;&#39;&#39; e, e,, e,,, }</code> etc. <em>Note that the last <code>e,,,</code> is actually the same as the first <code>e</code>.</em></p>
<p>This mode should be the most useful one, since most notes in a song are sort of close to each other, instead of sparesely distributed.</p>
<p>Ok, now we have the basics, let compose the Wonder Woman Theme.</p>
<p>The code of that theme is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">\relative g&apos; &#123;</div><div class="line">  \clef treble</div><div class="line">  \time 7/4</div><div class="line">  \tempo 4 = 155</div><div class="line">  % Music follows here.</div><div class="line">  r2 r r4. [e8 g b] \bar &quot;.|:&quot; </div><div class="line">  bf8^[g bf g bf g b bf g bf g bf g bf] </div><div class="line">  b^[ g b g b g bf b] r4 r2 </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This will give us the following score:<br><img src="melody.png" alt=""></p>
<p>Besides a different starting key <code>g&#39;</code>, there are couple of new things here:</p>
<ul>
<li>The <code>\clef</code> command, which defines the clef.</li>
<li>The <code>\time</code> command, which defines the time for each section.</li>
<li>The <code>\tempo</code> command, which defines the tempo.</li>
<li><code>%</code>, which defines a comment line.</li>
</ul>
<p>The next three lines defines both the melody and rhythm. <code>r</code> means rest. Numbers (<code>2</code>,<code>4</code>,<code>8</code>,<code>16</code> etc.) represent the denominator of the duration of the note. For example, <code>c4</code> means “a C note of 1/4 time”. A single dot <code>.</code> means extending the previous note to its \(1+\frac{1}{2}\) duration. Similarly, two dots <code>..</code> means extending the previous note to its \(1+\frac{1}{2}+\frac{1}{4}\) duration, and so on. The <code>\bar</code> command followed by <code>&quot;.|:&quot;</code> denotes a bold vertical with a colon. The <code>[]</code> command forces the enclosed notes to share the same beam. To force the beam to be upper, we use <code>^</code>. To force it to be lower, we use <code>_</code>.</p>
<p>You may also notice that only some notes have time values following them, some do not. In Lilypond, notes that do not have time value <em>inherit</em> the time value from previous one. For example, this sequence <code>c4 d ef g a b</code> use 1/4 time value in all notes.</p>
<p>Enough of terminology, let us analyze the music. I don’t know about you, but for me, this theme song is the primary reason that I would recommand this movie. One of the reason that this theme song is so attracting, according to <a href="https://www.youtube.com/watch?v=Z5vQz4Xz6q8&amp;t=258s" target="_blank" rel="external">this youtuber</a>.</p>
<p>To export this score to a MIDI file, you use the <code>\midi</code> command, with a proper instrument (cello today). However, I think there are enough commands to learn today, so I’ll skip explaning this command and throw you the entire code for generating both a score as PDF file and the music as a MIDI file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">\version &quot;2.18.2&quot;</div><div class="line"></div><div class="line">\header &#123;</div><div class="line">  title = &quot;Wonder Woman&quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">\language &quot;english&quot;</div><div class="line"></div><div class="line">cello = \relative g&apos; &#123;</div><div class="line">  \clef treble</div><div class="line">  \time 7/4</div><div class="line">  \tempo 4 = 155</div><div class="line">  % Music follows here.</div><div class="line">  r2 r r4. [e8 g b] \bar &quot;.|:&quot; |</div><div class="line">  bf8^[g bf g bf g b bf g bf g bf g bf] </div><div class="line">  b^[ g b g b g bf b] r4 r2 </div><div class="line">&#125;</div><div class="line"></div><div class="line">\score &#123;</div><div class="line">  \new Staff \with &#123;</div><div class="line">    instrumentName = &quot;Cello&quot;</div><div class="line">    midiInstrument = &quot;cello&quot;</div><div class="line">  &#125; &#123; \clef bass \cello &#125;</div><div class="line">  \layout &#123; &#125;</div><div class="line">  \midi &#123;</div><div class="line">    \tempo 4=100</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div></pre></td></tr></table></figure>
<p>Now, let’s listen to what we’ve created. (I export the music using Garageband).</p>
<iframe width="100%" height="160" src="https://clyp.it/z1iuagzd/widget" frameborder="0"></iframe></div></article></div></main><footer><div class="paginator"><a href="/2016/09/18/the_annoying_jupyter_notebook/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'jasontangs';
var disqus_identifier = '2017/07/19/Wonder-Woman-Theme-Music-Engraving-With-Lilypond/';
var disqus_title = 'Wonder Woman Theme -- Music Engraving With Lilypond';
var disqus_url = 'http://xiaottang2.github.io/2017/07/19/Wonder-Woman-Theme-Music-Engraving-With-Lilypond/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//jasontangs.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2017 <a href="http://xiaottang2.github.io">Tang Xiaoting</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-48829706-3",'auto');ga('send','pageview');</script></body></html>